function c(y,l,s){let f={...l.mapping,...l.ignore},d={};for(let n in f)d[f[n]]=n;let g=y.wallpaperPropertyListener={setPaused:s.paused,applyGeneralProperties:s.general};if(s.props){let n=s.props;g.applyUserProperties=p=>{for(let r in p){let t=p[r];if(t===null)continue;let o=t.value,e={color:()=>o.split(" ").map(a=>parseFloat(a)*255).join(","),file:()=>o&&typeof o=="string"&&"file:///"+o},i=t.type;t.value=i in e?e[i]():o,r in d?n(d[r],t.value,t):n("$"+r,t.value,t)}}}if(s.fetch&&Object.keys(l.directory.fetch).length){let o=function(e){t(p[e],r[e].map(i=>"file:///"+i))},n=l.directory.fetch,p={};for(let e in n)p[n[e]]=e;let r={},t=s.fetch;g.userDirectoryFilesAddedOrChanged=(e,i)=>{if(!r[e])r[e]=i;else for(let a of i)r[e].push(a);o(e)},g.userDirectoryFilesRemoved=(e,i)=>{for(let a of i)r[e].splice(r[e].indexOf(a),1);o(e)}}s.audio&&y.wallpaperRegisterAudioListener(s.audio)}export{c as default};
